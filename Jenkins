node {
	stage ('checkout') {
		checkout scm
	}
	
	stage ('analysis') {
		sh 'ls'
		step([$class: 'WarningsPublisher', parserConfigurations: [[parserName: 'Java Compiler (javac)']], unstableTotalAll: '0', usePreviousBuildAsReference: true])
		step([$class: 'hudson.plugins.checkstyle.CheckStylePublisher', pattern: '**/checkstyle.xml', unstableTotalAll:'0',unhealthy:'100', healthy:'100'])
	}
	
}
/*
pipeline {
	agent any
	
	stages {
		stage('apply analysis plugins') {
			//[$class: 'WarningsPublisher', parserConfigurations: [[parserName: 'Java Compiler (javac)']], unstableTotalAll: '0', usePreviousBuildAsReference: true]

			steps {				
				warnings consoleParsers: [[parserName: 'Java Compiler (javac)']], unstableTotalAll:'0', failedTotalAll: '20', unHealthy:'100', healthy:'100'
				//checkstyle pattern: 'checkstyle.xml', unstableTotalAll:'0', failedTotalAll: '20', unHealthy:'100', healthy:'100'
			}
		}
	}
}
*/
